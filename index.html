<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Xpose dashboard</title>
  <script src="/node_modules/dompurify/dist/purify.min.js"></script>
  <script src="/node_modules/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="/node_modules/jqueryui/jquery-ui.min.css" />
  <script src="/node_modules/simplemde/dist/simplemde.min.js"></script>
  <link rel="stylesheet" href="/node_modules/simplemde/dist/simplemde.min.css" />
  <script src="/node_modules/@json-editor/json-editor/dist/jsoneditor.js"></script>
  <link href="/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="xpose.css" rel="stylesheet">
  <script src="xpose.js"></script>
  <script src="xpose-setup.js"></script>
</head>
<body>
<!--
Work progress
-->
<div id="xpose-progress" style="border:0;padding:0;"></div>

<h1>Xpose: <span id="xpose-view"></span></h1>

<!--
Console view
-->
<div class="console">
  <button onclick="xpose.current.close()">
    <span class="ui-icon ui-icon-arrowreturnthick-1-w"></span>
  </button>
  <p id="console" style="white-space:pre;"></p>
</div>

<!--
Listing view
-->
<table>
  <thead>
    <tr>
      <td>
        <button type="button" id="listing-query" title="Refresh listing" onclick="xpose.current.display()">
          <span class="ui-icon ui-icon-refresh"></span>
        </button>
        <span onmouseenter="this.lastElementChild.style.display='inline-grid'" onmouseleave="this.lastElementChild.style.display='none'">
          <button type="button" title="Create a new entry">
            <span class="ui-icon ui-icon-plusthick"></span>
          </button>
          <span id="listing-new" style="display:none; position:absolute; z-index:1;">
          </span>
        </span>
        <button type="button" title="Toggle query editor" onclick="toggle_display(document.getElementById('listing-editor'))">
          <span class="ui-icon ui-icon-help"></span>
        </button>
        <span id="listing-count"></span>
        <span> entries</span>
      </td>
    </tr>
    <tr><td><div id="listing-editor" style="display:none"></div></td></tr>
  </thead>
	<tbody id="listing"></tbody>
</table>

<!--
Entry view
-->
<div>
  <button type="button" title="Return to listing view" onclick="xpose.current.close()">
    <span class="ui-icon ui-icon-arrowreturnthick-1-w"></span>
  </button>
  <button type="button" id="entry-refresh" title="Refresh entry" onclick="xpose.current.refresh()">
    <span class="ui-icon ui-icon-refresh"></span>
  </button>
  <button type="button" id="entry-save" title="Save entry" onclick="xpose.current.save()">
    <span class="ui-icon ui-icon-arrowthickstop-1-n"></span>
  </button>
  <button type="button" id="entry-delete" title="Delete entry..." style="border-color:red;" onclick="xpose.current.remove()">
    <span class="ui-icon ui-icon-trash"></span>
  </button>
  <button type="button" id="entry-attach" title="Show attachments" onclick="xpose.current.go_attach()">
    <span class="ui-icon ui-icon-folder-open"></span>
  </button>
  <span id="entry-short"></span>
  <div id="entry"></div>
</div>

<!--
Attachment view
-->
<table>
  <thead>
    <tr>
      <td colspan="10">
        <button type="button" title="Return to entry view" onclick="xpose.current.close()">
          <span class="ui-icon ui-icon-arrowreturnthick-1-w"></span>
        </button>
        <button type="button" id="attach-refresh" title="Refresh attachment" onclick="xpose.current.refresh()">
          <span class="ui-icon ui-icon-refresh"></span>
        </button>
        <span>
          <button type="button" title="Upload a new attachment" onclick="this.nextElementSibling.click()">
            <span class="ui-icon ui-icon-plusthick"></span>
          </button>
          <input type="file" id="attach-upload" multiple onchange="xpose.current.upload(this.files)" style="display:none;">
        </span>
        <button type="button" id="attach-save" title="Save attachment" onclick="xpose.current.save()">
          <span class="ui-icon ui-icon-arrowthickstop-1-n"></span>
        </button>
        <span id="attach-short"></span> <span id="attach-path"></span>
      </td>
    </tr>
  </thead>
  <tbody id="attach"></tbody>
</table>

</body>
</html>
